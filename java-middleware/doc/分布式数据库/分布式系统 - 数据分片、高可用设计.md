

## Redis
分区分片方式：一致性hash+虚拟槽（16383），所有键根据hash函数映射到0~16383整数槽中，如果有新节点加入，其他节点会把一部分槽和数据迁移到新的节点上。

查询操作：获取值时，接受请求的节点将计算hash值，得到该值现在所在的节点，如果是自身则直接返回值。否则返回MOVE，提供目标节点IP给用户，用户再对该节点进行请求。即请求重定向。

PS:一致性hash。一致性哈希算法在 1997 年由麻省理工学院提出，是一种特殊的哈希算法，在移除或者添加一个服务器时，能够尽可能小地改变已存在的服务请求与处理请求服务器之间的映射关系。
一致性哈希解决了简单哈希算法在分布式哈希表（Distributed Hash Table，DHT）中存在的动态伸缩等问题 。因为传统hash是有对所有key重新映射的问题，原来%3，现在%2.而一致性hash的重映射只要对K/n个关键字进行映射。
一般使用hash环实现，每次节点下线或扩容，都只会有少部分对象需要重写分配。由于一致性hash的节点数目越多，优化效果越好，所以引入虚拟节点，也即hash槽。当然整个重新分配hash值的逻辑还是要自己写的。


## ES
分区分片方式：每篇文档存哪个分片通过其ID字符串的hash决定。每个节点上有同样范围的hash区域。

查询操作：搜索时，接受请求的节点将请求转发到一组包含所有数据的分片，每组分片上进行查询，并将结果转发回去。收到请求的节点会把结果聚集并返回给用户。


## Kafka
分区分片方式：

查询操作：监听时，往一个broker发送请求，建立连接。由于请求的是特定topic中甚至特定patition，对于某个partition，broker存的全部数据，不同节点只是备份，所以不存在分区的概念。

## MySQL
分区分片方式：借用中间件实现数据库分库分表，一般需要预分区。

查询操作：借用中间件实现。