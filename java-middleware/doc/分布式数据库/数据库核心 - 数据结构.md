
从最基本的层面来看，数据库只做两件事，向它插入数据时，它就保存数据；之后查询时，它返回这些数据。

最简单的一个数据库，由bash函数组成
```shell script
#! /bin/bash

db_set() {
  echo "$1,$2" >> database;
}

db_get() {
  grep "^$1," database | sed -e "s/^$1,//" | tail -n 1
}
```
存储格式简单，存key vaule对。每次调用set追加到文件末尾。由于是顺序插入，所以插入性能会很好。
但是如果日志文件有大量记录时，查找就会性能很差了。因为必须从头扫到尾，于是就需要索引了。

于是人们最开始有了hash索引，把所有key放到内存中的hash表中，value代表磁盘中的偏移量，当需要时直接O(1)，读取偏移量对应内容。
缺点是大key时会有问题、区间查询效率不高。
|
V
于是又有了SSL-Tables、LSM-Tree。到整个阶段索引还是基于日志的。
|
V
B-Trees。已经是几乎所有关系型数据库的索引标准实现，许多非关系数据库页经常使用。