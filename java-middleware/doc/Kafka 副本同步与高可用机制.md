

首先Kafka中生产者、消费者使用的Topic进行消息存取，而partition分区的概念则是Server端的概念。用户可以指定分区，或不指定则使用默认规则。

同一主题下的不同分区包含的消息是不同的，分区在存储层面可以看作一个可追加的日志（Log）文件，并且追加到日志文件中会分配特点的偏移量OfferSet。

分区机制保证了分区内部消息的有序性，并且消息写入不同的分区也提高了吞吐量。Kafka为了分区引入了多副本机制，leader、follwer对用户无感，用来实现故障的自动转移。

#  1.副本同步机制

partition多副本的相互同步。


Kafka的复制机制即不是完全的同步复制，也不是单纯的异步复制。基于ISR的机制可以有效的平衡数据可靠性和性能。


